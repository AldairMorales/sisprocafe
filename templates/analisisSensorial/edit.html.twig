{% extends 'base.html.twig' %}
{% import 'macro/breadcrumb.html.twig' as breadcrumb %}
{% import 'macro/action.html.twig' as action %}

{% set _title = 'Analisis Sensorial' %}
{% set _main_title = 'Editar' %}
{% set _section =  'analisisSensorial_index'%}

{% block _breadcrumb %}
    {{ breadcrumb.show2(_title, _section, 'Editar') }}
{% endblock %}

{% block _main %}

    {{ include('analisisSensorial/_form.html.twig', {'button_label': 'Actualizar'}) }}

{% endblock %}

{% block _main_tools %}
    {% include 'crud/_tools_ico.html.twig' %}
{% endblock %}

{% block _body_tools %}
    {% include 'crud/_edit_links_ico.html.twig' with {'route_base':'analisisSensorial','entity': analisisSensorial} %}
{% endblock %}

{% block _body_tools_ico %}
    {% include 'crud/_edit_links_tool.html.twig' with {'route_base':'analisisSensorial','entity': analisisSensorial} %}
{% endblock %}

{% block _main_footer %}
    {% include 'crud/_edit_links.html.twig' with {'route_base':'analisisSensorial','entity': analisisSensorial} %}
{% endblock %}

{% block _stylesheets %}
{% endblock %}

{% block _javascripts %}
    <script src="{{ asset('js/select2.js') }}"></script>
    <script>
        jQuery(document).ready(function() {
            Select2();

            /*sliders*/
            let slider = document.querySelector("#sensorial_fragrancia");
            var slider1 = document.querySelector("#sensorial_sabor");
            var slider2 = document.querySelector("#sensorial_saborResidual");
            var slider3 = document.querySelector("#sensorial_acidez");
            var slider4 = document.querySelector("#sensorial_cuerpo"); 
            var slider5 = document.querySelector("#sensorial_balance"); 
            var slider6 = document.querySelector("#sensorial_puntajeCatador"); 
            $('#analisis_sensorial_fragrancia').hide();
            $('#analisis_sensorial_sabor').hide();
            $('#analisis_sensorial_saborResidual').hide();
            $('#analisis_sensorial_acidez').hide();
            $('#analisis_sensorial_cuerpo').hide();
            $('#analisis_sensorial_balance').hide();
            $('#analisis_sensorial_puntajeCatador').hide();
            var n=7.5,n1=7.5,n2=7.5,n3=7.5,n4=7.5,n5=7.5,n6=7.5;
            if($('#analisis_sensorial_fragrancia').val()){
                var n=$('#analisis_sensorial_fragrancia').val();
            }
            if($('#analisis_sensorial_sabor').val()){
                var n1=$('#analisis_sensorial_sabor').val();
            }
            if($('#analisis_sensorial_saborResidual').val()){
                var n2=$('#analisis_sensorial_saborResidual').val();
            }
            if($('#analisis_sensorial_acidez').val()){
                var n3=$('#analisis_sensorial_acidez').val();
            }
            if($('#analisis_sensorial_cuerpo').val()){
                var n4=$('#analisis_sensorial_cuerpo').val();
            }
            if($('#analisis_sensorial_balance').val()){
                var n5=$('#analisis_sensorial_balance').val();
            }
            if($('#analisis_sensorial_puntajeCatador').val()){
                var n6=$('#analisis_sensorial_puntajeCatador').val();
            }

            noUiSlider.create(slider,{
                start: n,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider1,{
                start: n1,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider2,{
                start: n2,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider3,{
                start: n3,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider4,{
                start: n4,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider5,{
                start: n5,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            noUiSlider.create(slider6,{
                start: n6,
                connect: true,
                tooltips: [wNumb({decimals: 2})],
                range: {
                    min: 6,
                    max: 10
                },
                pips: {
                    mode: "values",
                    values: [6,7,8,9,10],
                    density: 4
                }
            });
            slider.noUiSlider.on("update", function (values, handle) {
                $('#analisis_sensorial_fragrancia').val(values[handle]);
                puntajeTotal();
            });
            slider1.noUiSlider.on("update", function (values, handle1) {
                $('#analisis_sensorial_sabor').val(values[handle1]);
                puntajeTotal();
                
            });
            slider2.noUiSlider.on("update", function (values, handle2) {
                $('#analisis_sensorial_saborResidual').val(values[handle2]);
                puntajeTotal();
                
            });
            slider3.noUiSlider.on("update", function (values, handle3) {
                $('#analisis_sensorial_acidez').val(values[handle3]);
                puntajeTotal();
                
            });
            slider4.noUiSlider.on("update", function (values, handle4) {
                $('#analisis_sensorial_cuerpo').val(values[handle4]);
                puntajeTotal();
                
            });
            slider5.noUiSlider.on("update", function (values, handle5) {
                $('#analisis_sensorial_balance').val(values[handle5]);
                puntajeTotal();
                
            });
            slider6.noUiSlider.on("update", function (values, handle6) {
                $('#analisis_sensorial_puntajeCatador').val(values[handle6]);
                puntajeTotal();
                
            });
            
            /**/
            
            function puntajeTotal()
            {
                let $puntajeFinal = $('#analisis_sensorial_puntaje');
                let sum = 0;
                $(".js-rangeslider").each(function() {
                    if(!isNaN(this.value) && this.value.length!==0) {
                        sum += parseFloat(this.value);
                    }
                });
                $puntajeFinal.val(sum.toFixed(2));
                $('.sumTotal').text(sum.toFixed(2));
            }
            $(document).on('change', '.js-rangeslider', function(){
                puntajeTotal();
            });
            $('#analisis_sensorial_puntaje').trigger('change');

            puntajeTotal();

        });
    </script>
{% endblock %}